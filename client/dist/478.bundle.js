"use strict";(self.webpackChunkproject_atelier=self.webpackChunkproject_atelier||[]).push([[478],{5478:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var n=r(5671),a=r(3144),i=r(7326),l=r(9340),o=r(2963),c=r(1120),s=r(4942),u=r(7294),d=r(8636);const m=function(e){(0,l.Z)(p,e);var t,r,m=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function p(e){var t;return(0,n.Z)(this,p),t=m.call(this,e),(0,s.Z)((0,i.Z)(t),"handleChange",(function(e){t.props.handleReviewCallback(e)})),(0,s.Z)((0,i.Z)(t),"handleClick",(function(e){t.setState((function(t){return(0,s.Z)({},e,!t[e])}))})),t.state={five:!1,four:!1,three:!1,two:!1,one:!1},t.handleChange=t.handleChange.bind((0,i.Z)(t)),t.handleClick=t.handleClick.bind((0,i.Z)(t)),t}return(0,a.Z)(p,[{key:"render",value:function(){var e,t,r,n,a=this,i=0;if(void 0===this.props.ratings||!this.props.ratings[1])return null;r=Object.values(this.props.ratings).reduce((function(e,t){return parseInt(e)+parseInt(t)})),e=Object.keys(this.props.ratings),t=Object.values(this.props.ratings);for(var l=[],o=0;o<e.length;o++)l.push(e[o]*t[o]);n=(i=l.reduce((function(e,t){return e+t}))/r).toFixed(1);var c=0,s=0,m=0;return void 0!==this.props.recommend&&(c=parseInt(this.props.recommend.false),s=parseInt(this.props.recommend.true),m=Math.round(s/(s+c)*100)),u.createElement("div",{id:"review-breakdowns"},u.createElement("div",{id:"review-star-container"},u.createElement("div",{className:"star-text"},n||null),u.createElement("div",{className:"review-stars"}," ",u.createElement(d.Z,{rating:i}))),u.createElement("div",{id:"review-rec"},m,"% of reviews recommend this product",u.createElement("br",null)),u.createElement("div",{className:"bars-breakdown"},u.createElement("div",{id:"breakdown5"},u.createElement("div",{onClick:function(){a.handleClick("five"),a.handleChange(5)},id:"breakdown-rating"},!0===this.state.five?u.createElement("div",{style:{fontWeight:900}},"5 stars"):u.createElement("div",null,"5 stars")),u.createElement("div",{id:"breakdown-bar"},u.createElement("div",{style:{width:this.props.ratings[5]/r*100+"%"}})),u.createElement("span",{id:"ratings-count"},"Â ",this.props.ratings[5])),u.createElement("div",{id:"breakdown4"},u.createElement("div",{onClick:function(){a.handleClick("four"),a.handleChange(4)},id:"breakdown-rating"},!0===this.state.four?u.createElement("div",{style:{fontWeight:900}},"4 stars"):u.createElement("div",null,"4 stars")),u.createElement("div",{id:"breakdown-bar"},u.createElement("div",{style:{width:this.props.ratings[4]/r*100+"%"}})),u.createElement("span",{id:"ratings-count"},"Â ",this.props.ratings[4])),u.createElement("div",{id:"breakdown3"},u.createElement("div",{onClick:function(){a.handleClick("three"),a.handleChange(3)},id:"breakdown-rating"},!0===this.state.three?u.createElement("div",{style:{fontWeight:900}},"3 stars"):u.createElement("div",null,"3 stars")),u.createElement("div",{id:"breakdown-bar"},u.createElement("div",{style:{width:this.props.ratings[3]/r*100+"%"}})),u.createElement("span",{id:"ratings-count"},"Â ",this.props.ratings[3])),u.createElement("div",{id:"breakdown2"},u.createElement("div",{onClick:function(){a.handleClick("two"),a.handleChange(2)},id:"breakdown-rating"},!0===this.state.two?u.createElement("div",{style:{fontWeight:900}},"2 stars"):u.createElement("div",null,"2 stars")),u.createElement("div",{id:"breakdown-bar"},u.createElement("div",{style:{width:this.props.ratings[2]/r*100+"%"}}))),u.createElement("span",{id:"ratings-count"},"Â ",this.props.ratings[2]),u.createElement("div",{id:"breakdown1"},u.createElement("div",{onClick:function(){a.handleClick("one"),a.handleChange(1)},id:"breakdown-rating"},!0===this.state.one?u.createElement("div",{style:{fontWeight:900}},"1 star"):u.createElement("div",null,"1 star")),u.createElement("div",{id:"breakdown-bar"},u.createElement("div",{style:{width:this.props.ratings[1]/r*100+"%"}})),u.createElement("span",{id:"ratings-count"},"Â ",this.props.ratings[1]))))}}]),p}(u.Component),p={Size:["A size too small","1/2 a size too small","Perfect","1/2 a size too big","A size too wide"],Width:["Too narrow","Slightly narrow","Perfect","Slightly wide","Too wide"],Comfort:["Uncomfortable","Slightly uncomfortable","Ok","Comfortable","Perfect"],Quality:["Poor","Below average","What I expected","Pretty great","Perfect"],Length:["Runs Short","Runs slightly short","Perfect","Runs slightly long","Runs long"],Fit:["Runs tight","Runs slightly tight","Perfect","Runs slightly long","Runs long"]},f=function(e){var t,r,n=[];if(void 0!==e.characteristics){t=Object.keys(e.characteristics);for(var a=0;a<t.length;a++)n.push(t[a]),n.push(parseFloat(e.characteristics[t[a]].value));r=n.map((function(e,t){return t%2==0?u.createElement("h3",{className:"review-characteristic",key:t},e):u.createElement("div",{className:"cbar",onClick:function(e){return e.preventDefault()},key:t},u.createElement("label",null,u.createElement("input",{type:"range",min:"1",max:"100",defaultValue:e/5*100,id:t})),u.createElement("div",{className:"rcontainer space-between"},u.createElement("div",null,p[n[t-1]][0]),u.createElement("div",null,p[n[t-1]][1]),u.createElement("div",null,p[n[t-1]][2])))}))}return u.createElement(u.Fragment,null,r)};var v=r(885),h=r(9669),E=r.n(h);const g=function(e){var t=e.handleModalClose,r=e.imageURL;return u.createElement("div",{className:"qa-modal","data-testid":"image-modal"},u.createElement("div",{className:"qa-modal-main"},u.createElement("div",{className:"qa-image-modal"},u.createElement("i",{onClick:t,className:"fas fa-times-circle qa-close-icon"}),u.createElement("img",{src:r}),u.createElement("button",{onClick:t,className:"fas fa-times-circle qa-close-icon"}))))},w=function(e){var t=e.reviewId,r=e.helpfulness,n=e.searchTerm,a=(0,u.useState)((function(){return localStorage.getItem("helpful"+t)||!1})),i=(0,v.Z)(a,2),l=i[0],o=i[1],c=(0,u.useState)((function(){return localStorage.getItem("report"+t)||!1})),s=(0,v.Z)(c,2),m=s[0],p=s[1],f=(0,u.useState)(r),h=(0,v.Z)(f,2),w=h[0],y=h[1],b=(0,u.useState)([]),k=(0,v.Z)(b,2),Z=k[0],C=k[1],S=(0,u.useState)(!1),N=(0,v.Z)(S,2),R=N[0],O=N[1],x=(0,u.useState)(!1),I=(0,v.Z)(x,2),j=I[0],F=I[1],P=(0,u.useState)(""),_=(0,v.Z)(P,2),D=_[0],T=_[1],q=(0,u.useState)(!1),W=(0,v.Z)(q,2),L=W[0],A=W[1],B=function(e){F(!0),T(e.target.src)};(0,u.useEffect)((function(){C(n),Z.length>=3?O(!0):O(!1)}),[n]);var z=e.photos.map((function(e,t){return u.createElement("div",{key:t},u.createElement("img",{id:"review-img",onClick:B,src:e.url,alt:"review"+t}))})),U=!0===e.recommend?u.createElement("span",null,"âœ…Â Â Â Â I recommend this product"):u.createElement("span",null,"ðŸ‘ŽÂ Â Â Â I do not recommend this product");return Z.length>=3&&JSON.stringify(e.body).toLowerCase().indexOf(Z.toLowerCase())>0||!1===R?u.createElement("div",{className:"review-card"},u.createElement("div",{id:"reviewcard-topline"},u.createElement("div",{className:"star-rating-card"},u.createElement(d.Z,{rating:e.rating})),u.createElement("div",{id:"reviewcard-reviewer"}," âœ“",e.reviewer,", ",e.date)),u.createElement("div",{id:"reviewcard-summary"},0===e.summary.length?e.prodName:e.summary),u.createElement("div",{id:"reviewcard-body"},e.body.length>250?u.createElement("div",{id:"review-twofifty"}," ",e.body.slice(0,250),u.createElement("div",{id:"review-showmore",onClick:function(){return A(!0)}},L?u.createElement("div",{id:"review-overtwofifty"},e.body.slice(250,e.body.length)):u.createElement("div",{id:"review-underline"}," ...see more"))," "):u.createElement("div",{id:"under"},e.body)),u.createElement("div",{id:"reviewcard-photo"},z),u.createElement("div",{id:"reviewcard-recommend"},U),u.createElement("div",{id:"reviewcard-response"},null!==e.response?u.createElement(u.Fragment,null,u.createElement("span",{id:"review-bold"},"Response:"),u.createElement("br",null),e.response):e.response),u.createElement("div",{id:"reviewcard-helpful"},"Helpful?Â ",u.createElement("span",{id:"helpful",onClick:function(){l?console.log("helpful already clicked"):(o(!0),y((function(e){return e+1})),localStorage.setItem("helpful"+t,JSON.stringify(l)),E().put("/review/reviews/helpful",{id:t}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})))}},l?"âœ“ Thank you for your feedback!":"Yes")," (",w,") Â |Â Â ",u.createElement("span",{id:"helpful",onClick:function(){m?console.log("report already clicked"):(p(!0),localStorage.setItem("report"+t,JSON.stringify(m)),E().put("/review/reviews/report",{id:t}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})))}},m?"âœ“ Report sent for internal review":"Report")),j?u.createElement(g,{imageURL:D,handleModalClose:function(){F(!1)}}):null):null},y=function(e){for(var t=e.count,r=e.reviews,n={year:"numeric",month:"long",day:"numeric"},a=[],i=5;i>0;i--)if(!0===e["review"+i])a.push(i);else if(!1===e["review"+i]){var l=a.indexOf(i);l>-1&&a.splice(l,1)}if(e.reviews.length>0){if("relevance"===e.dropdown){var o=[].concat(r).sort((function(e,t){return e.helpfulness<t.helpfulness&&e.date<t.date?1:-1})).map((function(t,r){var i=new Date(t.date).toLocaleDateString("en-US",n);return a.includes(t.rating)||0===a.length||void 0===a[0]?u.createElement("div",{id:"review-card-container",key:r},u.createElement(w,{prodName:e.productName,searchTerm:e.searchTerm,reviewId:t.review_id,index:r,date:i,rating:t.rating,summary:t.summary,recommend:t.recommend,response:t.response,body:t.body,reviewer:t.reviewer_name,helpfulness:t.helpfulness,photos:t.photos})):null}));return u.createElement(u.Fragment,null,o.slice(0,t))}if("helpfulness"===e.dropdown){var c=[].concat(r).sort((function(e,t){return e.helpfulness<t.helpfulness?1:-1})).map((function(t,r){var i=new Date(t.date).toLocaleDateString("en-US",n);return a.includes(t.rating)||0===a.length||void 0===a[0]?u.createElement("div",{id:"review-card-container",key:r},u.createElement(w,{prodName:e.productName,searchTerm:e.searchTerm,reviewId:t.review_id,index:r,date:i,rating:t.rating,summary:t.summary,recommend:t.recommend,response:t.response,body:t.body,reviewer:t.reviewer_name,helpfulness:t.helpfulness,photos:t.photos})):null}));return console.log(c),u.createElement(u.Fragment,null,c.slice(0,t))}if("newest"===e.dropdown){var s=[].concat(r).sort((function(e,t){return e.date<t.date?1:-1})).map((function(t,r){var i=new Date(t.date).toLocaleDateString("en-US",n);return a.includes(t.rating)||0===a.length||void 0===a[0]?u.createElement("div",{id:"review-card-container",key:r},u.createElement(w,{prodName:e.productName,searchTerm:e.searchTerm,reviewId:t.review_id,index:r,date:i,rating:t.rating,summary:t.summary,recommend:t.recommend,response:t.response,body:t.body,reviewer:t.reviewer_name,helpfulness:t.helpfulness,photos:t.photos})):null}));return u.createElement(u.Fragment,null,s.slice(0,t))}}return null};const b=function(e){(0,l.Z)(m,e);var t,r,d=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function m(e){var t;return(0,n.Z)(this,m),t=d.call(this,e),(0,s.Z)((0,i.Z)(t),"handleChange",(function(e){t.props.dropdownCallback(e.target.value),t.setState({clicked:!1}),e.preventDefault()})),t.handleChange=t.handleChange.bind((0,i.Z)(t)),t}return(0,a.Z)(m,[{key:"render",value:function(){return this.props.nReviews>0?u.createElement(u.Fragment,null,u.createElement("div",{id:"review-sort"},this.props.nReviews," reviews, sorted by",u.createElement("select",{id:"review-dropdown",onChange:this.handleChange},u.createElement("option",{value:"relevance"},"relevance"),u.createElement("option",{value:"helpfulness"},"helpfulness"),u.createElement("option",{value:"newest"},"newest")),u.createElement("span",null,"â–¿")),u.createElement("div",{id:"review-caption"},"Note: reported reviews are not shown")):null}}]),m}(u.Component);const k=function(e){(0,l.Z)(m,e);var t,r,d=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function m(e){var t;return(0,n.Z)(this,m),t=d.call(this,e),(0,s.Z)((0,i.Z)(t),"addCount",(function(e){t.props.addCountCallback(2),e.preventDefault()})),t.addCount=t.addCount.bind((0,i.Z)(t)),t}return(0,a.Z)(m,[{key:"render",value:function(){return this.props.nReviews>this.props.reviewCount?u.createElement("div",{"data-testid":"child-button"},u.createElement("button",{id:"morereview-button",onClick:this.addCount},"MORE REVIEWS")):null}}]),m}(u.Component);var Z=r(2982),C=r(5861),S=r(7757),N=r.n(S),R={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,.6)",zIndex:99},O={width:"600px",height:"600px",position:"fixed",top:"50%",left:"50%",background:"#fff",zIndex:99,padding:"30px",transform:"translate(-50%, -50%)",borderRadius:"25px"};function x(e){var t=e.children,r=e.visable,n=e.close;return r?u.createElement(u.Fragment,null,u.createElement("div",{style:R}),u.createElement("div",{style:O},u.createElement("div",null,t),u.createElement("div",{id:"review-x"},u.createElement("i",{onClick:n,className:"fas fa-times-circle qa-close-icon"})))):null}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=e.productName,r=e.productId,n=e.reviews,a={Size:"none selected",Width:"none selected",Comfort:"none selected",Quality:"none selected",Length:"none selected",Fit:"none selected"},i=null!==n?Object.keys(n):null;r=parseInt(r)||null;var l=(0,u.useState)(0),o=(0,v.Z)(l,2),c=o[0],d=o[1],m=(0,u.useState)(""),f=(0,v.Z)(m,2),h=f[0],g=f[1],w=(0,u.useState)(""),y=(0,v.Z)(w,2),b=y[0],k=y[1],S=(0,u.useState)(null),R=(0,v.Z)(S,2),O=R[0],I=R[1],F=(0,u.useState)(""),P=(0,v.Z)(F,2),_=P[0],D=P[1],T=(0,u.useState)(""),q=(0,v.Z)(T,2),W=q[0],L=q[1],A=(0,u.useState)({}),B=(0,v.Z)(A,2),z=B[0],U=B[1],M=(0,u.useState)([]),Y=(0,v.Z)(M,2),V=Y[0],G=Y[1],J=(0,u.useState)(!1),H=(0,v.Z)(J,2),Q=H[0],K=H[1],X=(0,u.useState)(!1),$=(0,v.Z)(X,2),ee=$[0],te=$[1],re=(0,u.useState)(!1),ne=(0,v.Z)(re,2),ae=ne[0],ie=ne[1],le=(0,u.useState)(0),oe=(0,v.Z)(le,2),ce=oe[0],se=oe[1],ue=(0,u.useState)(!1),de=(0,v.Z)(ue,2),me=de[0],pe=de[1],fe=(0,u.useState)(a),ve=(0,v.Z)(fe,2),he=ve[0],Ee=ve[1],ge=(0,u.useState)(""),we=(0,v.Z)(ge,2),ye=we[0],be=we[1],ke=(0,u.useState)(""),Ze=(0,v.Z)(ke,2),Ce=Ze[0],Se=Ze[1],Ne=(0,u.useState)(""),Re=(0,v.Z)(Ne,2),Oe=Re[0],xe=Re[1],Ie=(0,u.useState)(""),je=(0,v.Z)(Ie,2),Fe=je[0],Pe=je[1],_e=(0,u.useState)(""),De=(0,v.Z)(_e,2),Te=De[0],qe=De[1],We=function(){var e=(0,C.Z)(N().mark((function e(t){var r,n,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files).length>5)){e.next=7;break}t.preventDefault(),G([]),be("Error: Cannot upload more than 5 photos"),e.next=14;break;case 7:n=N().mark((function e(){var t,n,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",r[a]),t.append("upload_preset","ketchup"),K(!0),e.next=6,fetch("https://api.cloudinary.com/v1_1/dousz4spf/image/upload",{method:"POST",body:t});case 6:return n=e.sent,e.next=9,n.json();case 9:i=e.sent,G((function(e){return[].concat((0,Z.Z)(e),[i.secure_url])})),K(!1);case 12:case"end":return e.stop()}}),e)})),a=0;case 9:if(!(a<r.length)){e.next=14;break}return e.delegateYield(n(),"t0",11);case 11:a++,e.next=9;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.createElement("div",null,u.createElement("button",{id:"addreview-button","data-testid":"ClickIndicator",onClick:function(){ie(!0)}},u.createElement("div",null,"ADD A REVIEW +")),u.createElement(x,{visable:ae,close:function(){G([]),Ee(a),d(0),pe(""),xe(""),Se(""),qe(""),Pe(""),ie(!1)}},!1===ee?u.createElement("div",{id:"rmodal-wrapper"},u.createElement("div",{id:"rmodal-border"},u.createElement("div",{id:"rmodal-title"},"Write Your Review"),u.createElement("div",{id:"rmodal-subtitle"},"About the ",t)),u.createElement("form",{id:"form",name:"form"},u.createElement("div",{id:"rmodal-stars"},u.createElement("div",{className:"rmodal-question"},"Overall rating (mandatory)*"),u.createElement("div",{className:"star-rating"},u.createElement("input",{type:"radio",onClick:function(){d(5)},id:"5-stars",name:"rating",value:"5"}),u.createElement("label",{htmlFor:"5-stars",className:"fa fa-star"}),u.createElement("input",{type:"radio",onClick:function(){d(4)},id:"4-stars",name:"rating",value:"4"}),u.createElement("label",{htmlFor:"4-stars",className:"fa fa-star"}),u.createElement("input",{type:"radio",onClick:function(){d(3)},id:"3-stars",name:"rating",value:"3"}),u.createElement("label",{htmlFor:"3-stars",className:"fa fa-star"}),u.createElement("input",{type:"radio",onClick:function(){d(2)},id:"2-stars",name:"rating",value:"2"}),u.createElement("label",{htmlFor:"2-stars",className:"fa fa-star"}),u.createElement("input",{type:"radio",onClick:function(){d(1)},id:"1-star",name:"rating",value:"1"}),u.createElement("label",{htmlFor:"1-star",className:"fa fa-star"})),u.createElement("span",{id:"rstar-value"},function(e){switch(e){case 5:return'"Great"';case 4:return'"Good"';case 3:return'"Average"';case 2:return'"Fair"';case 1:return'"Poor"';default:return null}}(c))),u.createElement("div",{id:"rmodal-err"},Oe),u.createElement("br",null),u.createElement("div",{id:"block"},u.createElement("div",{className:"rmodal-overall-rating"},u.createElement("p",null,"Do you recommend this product (mandatory)*?")),u.createElement("div",{id:"rmodal-radio"},u.createElement("input",{type:"radio",value:"true",onClick:function(){I(!0)},name:"review-radio"}),u.createElement("label",{htmlFor:"yes"},"Â yesÂ "),u.createElement("input",{type:"radio",value:"no",onClick:function(){I(!1)},name:"review-radio"}),u.createElement("label",{htmlFor:"no"},"Â noÂ ")),u.createElement("div",{id:"rmodal-err"},Fe),u.createElement("br",null)),u.createElement("div",{className:"rmodal-characteristics"},u.createElement("div",{className:"rmodal-question"},"Characteristics (mandatory)*"),null!==i?i.map((function(e,t){return u.createElement("div",{key:t},u.createElement("span",{id:"modal-charac-title"},e),u.createElement("br",null),u.createElement("div",{className:"letter-slider"},u.createElement("div",{className:"rmodal-selected"},u.createElement("span",{className:"choice"},"choice:")," ",he[e]),u.createElement("br",null),u.createElement("input",{id:"".concat(e,"1"),type:"radio",name:e,value:"1",onClick:function(){Ee((function(t){return j(j({},t),{},(0,s.Z)({},e,[p[e][0]]))})),U((function(t){return j(j({},t),{},(0,s.Z)({},j({},n[[e]]).id.toString(),1))}))}}),u.createElement("label",{htmlFor:"".concat(e,"1")},p[e][0]),u.createElement("input",{id:"".concat(e,"2"),type:"radio",name:e,value:"2",onClick:function(){U((function(t){return j(j({},t),{},(0,s.Z)({},j({},n[[e]]).id.toString(),2))})),Ee((function(t){return j(j({},t),{},(0,s.Z)({},e,[p[e][1]]))}))}}),u.createElement("label",{htmlFor:"".concat(e,"2")},p[e][1]),u.createElement("input",{id:"".concat(e,"3"),type:"radio",name:e,value:"3",onClick:function(){U((function(t){return j(j({},t),{},(0,s.Z)({},j({},n[[e]]).id.toString(),3))})),Ee((function(t){return j(j({},t),{},(0,s.Z)({},e,[p[e][2]]))}))}}),u.createElement("label",{htmlFor:"".concat(e,"3")},p[e][2]),u.createElement("input",{id:"".concat(e,"4"),type:"radio",name:e,value:"4",onClick:function(){U((function(t){return j(j({},t),{},(0,s.Z)({},j({},n[[e]]).id.toString(),4))})),Ee((function(t){return j(j({},t),{},(0,s.Z)({},e,[p[e][3]]))}))}}),u.createElement("label",{htmlFor:"".concat(e,"4")},p[e][3]),u.createElement("input",{id:"".concat(e,"5"),type:"radio",name:e,value:"5",onClick:function(){U((function(t){return j(j({},t),{},(0,s.Z)({},j({},n[[e]]).id.toString(),5))})),Ee((function(t){return j(j({},t),{},(0,s.Z)({},e,[p[e][4]]))}))}}),u.createElement("label",{htmlFor:"".concat(e,"5")},p[e][4])))})):null),u.createElement("div",{className:"rmodal-summary"},u.createElement("div",{className:"rmodal-question"},"Review Summary"),u.createElement("input",{type:"text",placeholder:"Example: Best purchase ever!",onChange:function(e){return g(e.target.value)},maxLength:"60",size:"85"})),u.createElement("div",{className:"rmodal-body"},u.createElement("div",{className:"rmodal-question"},"Your Review (mandatory)*"),u.createElement("textarea",{id:"rmodal-textarea",property:"comment",cols:"65",rows:"4",minLength:"50",maxLength:"1000",placeholder:"Why did you like this product or not?",onChange:function(e){!function(e){se(e.target.value.length)}(e),k(e.target.value)}}),u.createElement("p",{id:"rmodal-caption-box"},ce<50?"Minimum required characters left: ".concat(50-ce):"Minimum Reached"),u.createElement("div",{id:"rmodal-err"},Ce),u.createElement("br",null)),u.createElement("div",{className:"rmodal-nickname"},u.createElement("label",{className:"rmodal-question"},"What is your nickname (mandatory)*?"),u.createElement("input",{type:"text",name:"nickname",id:"nickname",placeholder:"jackson11",onChange:function(e){D(e.target.value)}}),u.createElement("p",{id:"rmodal-caption"},"For privacy reasons, do not use your full name or email address")),u.createElement("div",{className:"rmodal-email"},u.createElement("label",{className:"rmodal-question"},"Your email (mandatory)* "),u.createElement("input",{type:"text",name:"email",id:"email",maxLength:"60",Length:"200",placeholder:"jackson11@email.com",onChange:function(e){return L(e.target.value)}}),u.createElement("p",{id:"rmodal-caption"},"For authentication reasons, you will not be emailed"),u.createElement("div",{id:"rmodal-err"},Te),u.createElement("br",null)),u.createElement("div",{className:"rmodal-nickname"},u.createElement("label",{className:"rmodal-question"},"Upload your Photos "),u.createElement("input",{multiple:!0,type:"file",name:"photo",id:"upload",accept:"image/png, image/jpeg",onChange:We}),Q?u.createElement("h3",{"data-testid":"image-loaded"},"loading ... "):u.createElement("div",{className:"form-group qa-multi-preview","data-testid":"image-loaded"},(V||[]).map((function(e,t){return u.createElement("img",{key:t,src:e,alt:"review image ".concat(t)})})))),u.createElement("span",{id:"rmodal-caption"}," Upload up to 5 photos"),u.createElement("br",null),u.createElement("div",{id:"rmodal-err"},ye),u.createElement("br",null),u.createElement("div",{id:"rmodal-errorMessage"},!1===me?"":"Please check your mandatory fields"),u.createElement("div",{className:"review-form-btn-container"},u.createElement("button",{id:"review-form-btn",type:"submit",onClick:function(e){return function(e){e.preventDefault();var t={product_id:r,rating:c,summary:h,body:b,recommend:O,name:_,email:W,photos:V,characteristics:z};0===t.rating&&xe("Error: missing rating"),t.body.length<50&&Se("Error: minimum characters not met"),!1!==t.email.includes("@")&&null!==t.email||qe("Error: invalid email address"),null===t.recommend&&Pe("Error: missing recommendation"),0!==t.rating&&""!==t.summary&&null!==t.recommend&&""!==t.body&&""!==t.email&&!1!==t.email.includes("@")?(E().post("/review/reviews",t).then((function(e){return e.send(201)})).catch((function(e){return console.log(e)})),te(!0)):pe(!0)}(e)}},"Submit")))):u.createElement(u.Fragment,null,u.createElement("header",null,u.createElement("div",{className:"logo-name",id:"logo-name"},"cinquante-sept")),u.createElement("div",{id:"rmodal-submitted"}," Thanks for submitting your review! "))))}var P=r(7330);const _=function(e){(0,l.Z)(p,e);var t,r,d=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function p(e){var t;return(0,n.Z)(this,p),t=d.call(this,e),(0,s.Z)((0,i.Z)(t),"handleCallback",(function(e){t.setState({dropdown:e})})),(0,s.Z)((0,i.Z)(t),"addCountCallback",(function(e){t.setState({reviewCount:t.state.reviewCount+2})})),(0,s.Z)((0,i.Z)(t),"handleReviewCallback",(function(e){var r="review"+e;t.setState((function(t){var n;return n={},(0,s.Z)(n,r,!t[r]),(0,s.Z)(n,"element",e),n}))})),(0,s.Z)((0,i.Z)(t),"handleSearch",(function(e){t.setState({searchTerm:e.target.value})})),t.state={dropdown:"relevance",reviewCount:2,review5:!1,review4:!1,review3:!1,review2:!1,review1:!1,element:0,searchTerm:[]},t.handleSearch=t.handleSearch.bind((0,i.Z)(t)),t}return(0,a.Z)(p,[{key:"render",value:function(){return void 0!==this.props.reviews?u.createElement(u.Fragment,null,u.createElement("div",{id:"Review"},u.createElement("div",{id:"review-title"},"RATINGS & REVIEWS"),u.createElement(P.Z,{onChange:this.handleSearch,placeholder:"SEARCH REVIEWS BY KEYWORD"}),u.createElement("div",{className:"review-grid",onClick:this.props.trackClick},u.createElement("div",{id:"review-left"},u.createElement(m,{ratings:this.props.stars.ratings,recommend:this.props.stars.recommended,handleReviewCallback:this.handleReviewCallback}),u.createElement(f,{characteristics:this.props.stars.characteristics})),u.createElement("div",{id:"review-container-right"},u.createElement("div",{id:"review-right"},u.createElement(b,{nReviews:this.props.reviews.length,dropdownCallback:this.handleCallback}),u.createElement("div",{id:"reviewcard-column"},u.createElement(y,{reviews:this.props.reviews,productName:this.props.productInfo.name,dropdown:this.state.dropdown,count:this.state.reviewCount,productId:this.props.stars.product_id,review1:this.state.review1,review2:this.state.review2,review3:this.state.review3,review4:this.state.review4,review5:this.state.review5,element:this.state.element,searchTerm:this.state.searchTerm})),u.createElement(k,{addCountCallback:this.addCountCallback,nReviews:this.props.reviews.length,reviewCount:this.state.reviewCount}),u.createElement(F,{productName:this.props.productInfo.name||null,productId:this.props.stars.product_id,reviews:void 0!==this.props.stars.characteristics?this.props.stars.characteristics:null})))))):u.createElement("div",{"data-testid":"Review-render"},"null")}}]),p}(u.Component)},7330:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(7294);const a=function(e){var t=e.onChange,r=e.placeholder;return n.createElement("div",{className:"qa-search-bar"},n.createElement("input",{type:"text",placeholder:r,onChange:t}),n.createElement("button",{className:"qa-search-btn"},n.createElement("i",{className:"fa fa-search"})))}},8636:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(885),a=r(7294);const i=function(e){var t=e.rating,r=e.stars,i=(0,a.useState)(),l=(0,n.Z)(i,2),o=l[0],c=l[1];return(0,a.useEffect)((function(){!function(){if(r){var e=function(e){var t=0,r=0;if(e)for(var n=Object.keys(e),a=Object.values(e),i=0;i<n.length;i++)t+=parseInt(a[i]),r+=parseInt(n[i])*parseInt(a[i]);return t>0?(r/t).toFixed(1):0}(r.ratings);c(e)}t&&c(t)}()}),[r]),a.createElement("div",null,o>0?a.createElement("div",{className:"star",style:{"--rating":o}},a.createElement("i",{className:"fa fa-star"}),a.createElement("i",{className:"fa fa-star"}),a.createElement("i",{className:"fa fa-star"}),a.createElement("i",{className:"fa fa-star"}),a.createElement("i",{className:"fa fa-star"})):null)}},7326:(e,t,r)=>{function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:()=>n})},5671:(e,t,r)=>{function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>n})},3144:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,{Z:()=>a})},1120:(e,t,r)=>{function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}r.d(t,{Z:()=>n})},9340:(e,t,r)=>{function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}r.d(t,{Z:()=>a})},2963:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1002),a=r(7326);function i(e,t){if(t&&("object"===(0,n.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},2982:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(907),a=r(181);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}}]);