"use strict";(self.webpackChunkproject_atelier=self.webpackChunkproject_atelier||[]).push([[828],{6828:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(885),r=a(7294),l=a(1002),o=a(9669),c=a.n(o);const s=function(e){var t=e.id,a=e.localStorageName,l=e.helpfulness,o=JSON.parse(localStorage.getItem(a))||[],s=!1;o.includes(t)&&(s=!0);var i="questions";a.indexOf("Answer")>0&&(i="answers");var m=(0,r.useState)(s),u=(0,n.Z)(m,2),d=u[0],f=u[1],p=(0,r.useState)(s),E=(0,n.Z)(p,2),q=E[0],h=E[1],v=(0,r.useState)(l),y=(0,n.Z)(v,2),N=y[0],b=y[1];return r.createElement("div",{onClick:function(){d?console.log("already clicked"):(f(!0),h(!0),b((function(e){return e+1})),o.push(t),localStorage.setItem(a,JSON.stringify(o)),c().put("/qa/".concat(i,"/helpful"),{id:t}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})))}},r.createElement("span",{className:d?"qa-not-clickable":"qa-clickable"},"Yes ")," (",N,") ",q?"âœ“":null)},i=function(e){var t=e.handleModalClose,a=e.imageURL;return r.createElement("div",{className:"qa-modal","data-testid":"image-modal"},r.createElement("div",{className:"qa-modal-main"},r.createElement("div",{className:"qa-image-modal"},r.createElement("i",{onClick:t,className:"fas fa-times-circle qa-close-icon"}),r.createElement("img",{src:a}),r.createElement("button",{onClick:t,className:"fas fa-times-circle qa-close-icon"}))))},m=function(e){var t=e.answer,a=JSON.parse(localStorage.getItem("reportedAnswers"))||[],o=!1;a.includes(t.id)&&(o=!0);var m,u,d,f,p,E=(0,r.useState)(o),q=(0,n.Z)(E,2),h=q[0],v=q[1],y=(0,r.useState)(!1),N=(0,n.Z)(y,2),b=N[0],g=N[1],S=(0,r.useState)(""),w=(0,n.Z)(S,2),k=w[0],C=w[1],O=function(e){g(!0),C(e.target.src)};return r.createElement("div",{className:"qa-answer"},r.createElement("div",null," ",r.createElement("span",{className:"qa-tiny"}," ",t.body)," "),t.photos.length?r.createElement("div",{className:"qa-answer-img-container"},t.photos.map((function(e,t){return"object"==(0,l.Z)(e)?r.createElement("img",{className:"qa-answer-img",src:e.url,key:t,onClick:O,alt:"answer image ".concat(t)}):r.createElement("img",{className:"qa-answer-img",src:e,key:t,onClick:O,alt:"answer image ".concat(t)})}))):null,r.createElement("div",{className:"qa-answerby qa-tiny"},r.createElement("div",null," by",r.createElement("span",{className:"seller"==t.answerer_name.toLowerCase()?"qa-bold":"null"}," ".concat(t.answerer_name,",")),(m=t.date,d=(u=new Date(m)).getFullYear(),f=["January","February","March","April","May","June","July","August","September","October","November","December"][u.getMonth()],p=u.getDate()," ".concat(f," ").concat(p,", ").concat(d))),r.createElement("div",{className:"qa-helpful-container"},r.createElement("div",{className:"qa-divider"},"|"),r.createElement("div",{className:"qa-helpful"}," Helpful?"),r.createElement(s,{id:t.id,localStorageName:"helpfulAnswersList",helpfulness:t.helpfulness}),r.createElement("div",{className:"qa-divider"},"|"),r.createElement("div",{className:h?"qa-not-clickable qa-helpful":"qa-clickable qa-helpful",onClick:function(){h?console.log("already reported"):(v(!0),a.push(t.id),localStorage.setItem("reportedAnswers",JSON.stringify(a)),c().put("/qa/answers/report",{id:t.id}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})))}},h?"Reported":"Report"))),b?r.createElement(i,{imageURL:k,handleModalClose:function(e){g(!1)}}):null)};var u=a(2982),d=a(5861),f=a(7757),p=a.n(f);function E(e){var t={};return e.name.trim()?e.name.length>=60&&(t.name="Nickname needs to be shorter than 60 characters"):t.name="Nickname required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Email address is invalid"):t.email="Email required",e.body||(t.body="Input required"),t}const q=function(e){var t=e.open,a=e.questionId,l=e.productName,o=e.question,s=e.onClose,i=e.onSubmitAnswer;if(!t)return null;var m=(0,r.useState)(""),f=(0,n.Z)(m,2),q=f[0],h=f[1],v=(0,r.useState)(""),y=(0,n.Z)(v,2),N=y[0],b=y[1],g=(0,r.useState)(""),S=(0,n.Z)(g,2),w=S[0],k=S[1],C=(0,r.useState)([]),O=(0,n.Z)(C,2),Z=O[0],A=O[1],j=(0,r.useState)(!1),x=(0,n.Z)(j,2),I=x[0],L=x[1],R=(0,r.useState)(!0),_=(0,n.Z)(R,2),F=_[0],D=_[1],Q=(0,r.useState)({}),P=(0,n.Z)(Q,2),M=P[0],W=P[1],J=function(){var e=(0,d.Z)(p().mark((function e(t){var a,n,r,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clicked"),a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","ketchup"),L(!0),e.next=8,fetch("https://api.cloudinary.com/v1_1/dseonxo5o/image/upload",{method:"Post",body:n});case 8:return r=e.sent,e.next=11,r.json();case 11:l=e.sent,A([].concat((0,u.Z)(Z),[l.secure_url])),L(!1),Z.length>=4&&D(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:"qa-modal"},r.createElement("div",{className:"qa-modal-main"},r.createElement("div",{className:"qa-modal-header"},r.createElement("h3",null,"Submit your Answer"),r.createElement("p",null," ",l,": ",o," ")),r.createElement("form",{className:"qa-form"},r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"answer"},"Your Answer (mandatory)*"),r.createElement("textarea",{className:"qa-input",id:"answer",name:"body",type:"textarea",rows:"5",cols:"33",maxLength:"1000",autoComplete:"off",onChange:function(e){return h(e.target.value)},"aria-label":"answer-input",required:!0}),M.body&&r.createElement("small",null," ",M.body)),r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"nickname"},"What is your nickname (mandatory)*:"),r.createElement("input",{className:"qa-input",id:"nickname",name:"name",type:"text",placeholder:"Example: jackson543!",autoComplete:"off",maxLength:"60",onChange:function(e){return b(e.target.value)},required:!0}),r.createElement("span",{className:"qa-instructions"}," For privacy reasons, do not use your full name or email address"),M.name&&r.createElement("small",null," ",M.name)),r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"email"},"Your email (mandatory)*"),r.createElement("input",{className:"qa-input",id:"email",type:"text",name:"email",placeholder:"Example: jack@email.com",autoComplete:"off",maxLength:"60",onChange:function(e){return k(e.target.value)},required:!0}),r.createElement("span",{className:"qa-instructions"}," For authentication reasons, you will not be emailed"),M.email&&r.createElement("small",null," ",M.email)),r.createElement("div",{className:"qa-image-upload qa-form-control"},F?r.createElement("input",{type:"file",name:"file",placeholder:"Upload an image","data-testid":"upload-image",onChange:J,multiple:!0}):null,r.createElement("span",{className:"qa-instructions"}," Upload up to 5 photos"),I?r.createElement("h3",{"data-testid":"image-loaded"},"loading ... "):r.createElement("div",{className:"form-group qa-multi-preview","data-testid":"image-loaded"},(Z||[]).map((function(e,t){return r.createElement("img",{key:t,src:e,alt:"answer image ".concat(t)})})))),r.createElement("div",{className:"qa-form-control qa-form-btn-container"},r.createElement("input",{type:"submit",className:"qa-form-btn",value:"Submit",onClick:function(e){e.preventDefault();var t={body:q,name:N,email:w,photos:Z},n=E(t);W(n),0==Object.entries(n).length&&c().post("/qa/questions/".concat(a,"/answers"),t).then((function(e){i(),s()})).catch((function(e){return console.log(e)}))}}),r.createElement("input",{type:"submit",className:"qa-form-btn",value:"Close",onClick:s})))))},h=function(e){var t,a,l,o=e.question,i=e.productName,u=(0,r.useState)(o.question_body),d=(0,n.Z)(u,2),f=d[0],p=(d[1],(0,r.useState)(o.answers)),E=(0,n.Z)(p,2),h=E[0],v=E[1],y=(0,r.useState)(2),N=(0,n.Z)(y,2),b=N[0],g=N[1],S=(0,r.useState)(),w=(0,n.Z)(S,2),k=w[0],C=w[1],O=(0,r.useState)(!1),Z=(0,n.Z)(O,2),A=Z[0],j=Z[1];return(0,r.useEffect)((function(){Object.keys(h).length>2&&C("LOAD MORE ANSWERS")}),[h]),r.createElement("div",{className:"qa-question-answers-container"},r.createElement("div",{className:"qa-question-container"},r.createElement("div",{className:"qa-question"},"Q: ",f," "),r.createElement("div",{className:"qa-tiny qa-helpful-container"},r.createElement("div",{className:"qa-helpful"}," Helpful?"),r.createElement(s,{id:o.question_id,helpfulness:o.question_helpfulness,localStorageName:"questionsMarkedHelpful"}),r.createElement("div",{className:"qa-divider"},"|"),r.createElement("div",{className:"qa-clickable qa-helpful",onClick:function(){return j(!0)}}," Add Answers "))),r.createElement("div",{className:"qa-answers qa-scroll"},0==Object.keys(h).length?r.createElement("p",{style:{fontStyle:"italic",fontSize:"small",color:"darkgrey"}},"There is no answer to this question"):r.createElement(r.Fragment,null,r.createElement("div",{className:"qa-answers-left"},"A: "),r.createElement("div",{className:"qa-answers-right"},(t=h,a=Object.keys(t).map((function(e){return t[e]})),l=[],a.sort((function(e,t){return t.helpfulness-e.helpfulness})),a.forEach((function(e,t){"seller"==e.answerer_name.toLowerCase()&&(l.push(e),a.splice(t,1))})),l.concat(a)).slice(0,b).map((function(e){return r.createElement(m,{answer:e,key:e.id})}))))),k?r.createElement("div",{className:"qa-moreanswer qa-tiny",onClick:function(){var e;"LOAD MORE ANSWERS"===(e=k)?(g(Object.keys(h).length),C("COLLAPSE ANSWERS")):"COLLAPSE ANSWERS"===e&&(g(2),C("LOAD MORE ANSWERS"))}},k):null,r.createElement(q,{open:A,productName:i,question:f,questionId:o.question_id,onClose:function(){j(!1)},onSubmitAnswer:function(){c().get("/qa/questions/".concat(o.question_id,"/answers")).then((function(e){return v(e.data)})).catch((function(e){return console.log(e)}))}}))};var v=a(4942);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,v.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const b=function(e){var t=e.open,a=e.productId,l=e.productName,o=e.onClose,s=e.onSubmitQuestion;if(!t)return null;var i=(0,r.useState)(""),m=(0,n.Z)(i,2),u=(m[0],m[1],(0,r.useState)("")),d=(0,n.Z)(u,2),f=(d[0],d[1],(0,r.useState)("")),p=(0,n.Z)(f,2),q=(p[0],p[1],(0,r.useState)({body:"",name:"",email:""})),h=(0,n.Z)(q,2),y=h[0],b=h[1],g=(0,r.useState)({}),S=(0,n.Z)(g,2),w=S[0],k=S[1],C=function(e){b(N(N({},y),{},(0,v.Z)({},e.target.name,e.target.value)))};return r.createElement("div",{className:"qa-modal"},r.createElement("div",{className:"qa-modal-main"},r.createElement("div",{className:"qa-modal-header"},r.createElement("h3",null,"Ask Your Question"),r.createElement("p",null,"About the ",l," ")),r.createElement("form",{className:"qa-form"},r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"question"},"Your Question (mandatory)*"),r.createElement("textarea",{className:"qa-input",id:"question",name:"body",type:"textarea",rows:"5",cols:"33",maxLength:"1000",autoComplete:"off",value:y.body,onChange:C,"aria-label":"question-input",required:!0}),w.body&&r.createElement("small",null," ",w.body)),r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"nickname"},"What is your nickname (mandatory)*"),r.createElement("input",{className:"qa-input",id:"nickname",name:"name",type:"text",placeholder:"Example: jackson11!",autoComplete:"off",maxLength:"60",value:y.name,onChange:C,required:!0}),r.createElement("span",{className:"qa-instructions"}," For privacy reasons, do not use your full name or email address"),w.name&&r.createElement("small",null," ",w.name)),r.createElement("div",{className:"qa-form-control"},r.createElement("label",{htmlFor:"email"},"Your email (mandatory)*"),r.createElement("input",{className:"qa-input",id:"email",type:"email",name:"email",value:y.email,placeholder:"Example: jack@email.com",autoComplete:"off",maxLength:"60",onChange:C,required:!0}),r.createElement("span",{className:"qa-instructions"}," For authentication reasons, you will not be emailed"),w.email&&r.createElement("small",null," ",w.email)),r.createElement("div",{className:"qa-form-control qa-form-btn-container"},r.createElement("input",{type:"submit",value:"Submit",className:"qa-form-btn",onClick:function(e){!function(e){e.preventDefault();var t=E(y);if(k(t),0==Object.keys(t).length){var n=N(N({},y),{},{product_id:a});c().post("/qa/questions",n).then((function(e){s(),o()})).catch((function(e){return console.log(e)}))}}(e)}}),r.createElement("input",{type:"submit",value:"Close",className:"qa-form-btn",onClick:o})))))},g=function(e){var t=e.questions,a=e.productId,l=e.productInfo,o=(0,r.useState)(2),s=(0,n.Z)(o,2),i=s[0],m=s[1],u=(0,r.useState)([]),d=(0,n.Z)(u,2),f=d[0],p=d[1],E=(0,r.useState)(!1),q=(0,n.Z)(E,2),v=q[0],y=q[1],N=(0,r.useState)(!1),g=(0,n.Z)(N,2),S=g[0],w=g[1];return(0,r.useEffect)((function(){t&&(t.length>2?(p(t),y(!0)):(p(t),y(!1)))}),[t]),(0,r.useEffect)((function(){i>=t.length&&y(!1)}),[i]),r.createElement("div",null,r.createElement("div",{className:"qa-main-questions"},f.slice(0,i).map((function(e){return r.createElement(h,{question:e,key:e.question_id,productId:a,productName:l?l.name:"product"})}))),r.createElement("div",{className:"qa-bottom"},v?r.createElement("div",{className:"qa-more-question",onClick:function(){return m(i+2)}},"MORE ANSWERED QUESTIONS"):null,r.createElement("div",{className:"qa-more-question",onClick:function(){w(!0)}},"ASK A QUESTION +"),r.createElement(b,{open:S,productName:l?l.name:"product",productId:a,onClose:function(){w(!1)},onSubmitQuestion:function(){c().get("/qa/questions/".concat(a)).then((function(e){p(e.data)})).catch((function(e){return console.log(e)}))}})))};var S=a(7330);const w=function(e){var t=e.questions,a=e.productId,l=e.productInfo,o=e.trackClick,c=(0,r.useState)(""),s=(0,n.Z)(c,2),i=s[0],m=s[1],u=(0,r.useState)([]),d=(0,n.Z)(u,2),f=d[0],p=d[1];return(0,r.useEffect)((function(){p(t)}),[t]),(0,r.useEffect)((function(){if(i.length>=3){var e=[];t&&(t.forEach((function(t){JSON.stringify(t.question_body).toLowerCase().indexOf(i.toLowerCase())>0&&e.push(t)})),p(e))}else p(t)}),[i]),r.createElement("div",{className:"QA","data-testid":"QA-render",onClick:o},r.createElement("div",{className:"QA-title"}," ","QUESTIONS & ANSWERS"),r.createElement(S.Z,{onChange:function(e){m(e.target.value)},placeholder:"HAVE A QUESTION? SEARCH FOR ANSWER..."}),r.createElement(g,{questions:f,productId:a,productInfo:l}))}},7330:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294);const r=function(e){var t=e.onChange,a=e.placeholder;return n.createElement("div",{className:"qa-search-bar"},n.createElement("input",{type:"text",placeholder:a,onChange:t}),n.createElement("button",{className:"qa-search-btn"},n.createElement("i",{className:"fa fa-search"})))}},2982:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(907),r=a(181);function l(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:(e,t,a)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}a.d(t,{Z:()=>n})}}]);